<!DOCTYPE html>
<html lang="en" class="font-sans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Found-Hub - Login/Sign-Up</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body style="background-color: #1A1A1A;" class="flex flex-col min-h-screen">

<!-- HEADER -->
<header style="background-color: #121212; color: #F5F5F5; padding: 1rem 2rem;">
    <div class="container mx-auto flex justify-between items-center">
        <a href="index.html" class="text-2xl font-bold">Found-Hub</a>
        <div class="hidden md:flex items-center space-x-6">
            <a href="index.html" class="text-gray-300 hover:text-white">Home</a>
            <a href="about.html" class="text-gray-300 hover:text-white">About Me</a>
            <a href="lost-items.html" class="text-gray-300 hover:text-white">Lost Items</a>
            <a href="found-items.html" class="text-gray-300 hover:text-white">Found Items</a>
            <a href="login-signup.html" class="text-white font-bold">Login/Sign-Up</a>
            <a href="dashboard.html" class="text-gray-300 hover:text-white">Dashboard</a>
        </div>
    </div>
</header>

<main>

<section class="text-center flex flex-col items-center justify-center min-h-[40vh] p-8">
    <h2 class="text-4xl md:text-6xl font-bold text-yellow-400">Welcome to Found-Hub!</h2>
    <p class="mt-4 text-lg md:text-xl text-orange-400">
        Log in or sign up to manage your lost and found items.
    </p>
</section>

<!-- LOGIN -->
<section class="container mx-auto py-12 px-6 flex justify-center">
    <div class="w-full max-w-md p-8 rounded-lg bg-[#262626]">
        <h2 class="text-3xl font-bold text-center mb-8 text-white">Login to Your Account</h2>

        <form id="loginForm" class="space-y-6">
            <div>
                <label class="block text-sm mb-1 text-gray-300">College Email</label>
                <input id="li_email" type="email" required
                       class="w-full rounded-md p-2 text-sm bg-[#1A1A1A] text-white border border-[#333]">
            </div>

            <div>
                <label class="block text-sm mb-1 text-gray-300">Password</label>
                <input id="li_pass" type="password" required
                       class="w-full rounded-md p-2 text-sm bg-[#1A1A1A] text-white border border-[#333]">
            </div>

            <button type="submit"
                    class="w-full p-2 text-white font-semibold rounded-md bg-orange-500">
                Login
            </button>
        </form>
    </div>
</section>

<!-- SIGNUP -->
<section class="container mx-auto py-12 px-6 flex justify-center">
    <div class="w-full max-w-md p-8 rounded-lg bg-[#262626]">
        <h2 class="text-3xl font-bold text-center mb-8 text-white">Create a New Account</h2>

        <form id="signupForm" class="space-y-6">
            <div>
                <label class="block text-sm mb-1 text-gray-300">Full Name</label>
                <input id="su_name" type="text" required
                       class="w-full rounded-md p-2 text-sm bg-[#1A1A1A] text-white border border-[#333]">
            </div>

            <div>
                <label class="block text-sm mb-1 text-gray-300">College Email</label>
                <input id="su_email" type="email" required
                       class="w-full rounded-md p-2 text-sm bg-[#1A1A1A] text-white border border-[#333]">
            </div>

            <div>
                <label class="block text-sm mb-1 text-gray-300">Password</label>
                <input id="su_pass" type="password" required
                       class="w-full rounded-md p-2 text-sm bg-[#1A1A1A] text-white border border-[#333]">
            </div>

            <div>
                <label class="block text-sm mb-1 text-gray-300">Confirm Password</label>
                <input id="su_pass2" type="password" required
                       class="w-full rounded-md p-2 text-sm bg-[#1A1A1A] text-white border border-[#333]">
            </div>

            <button type="submit"
                    class="w-full p-2 text-white font-semibold rounded-md bg-orange-500">
                Sign Up
            </button>
        </form>
    </div>
</section>

</main>

<footer class="bg-[#121212] text-gray-400 py-6 text-center mt-auto">
   Â© 2026 Found-Hub. All rights reserved. Your College Campus Buddy.
</footer>

<script>
const API = "https://foundhub-fullstack.onrender.com";

/* =========================
   SAVE AUTH FUNCTION (IMPORTANT)
========================= */
function saveAuth(data) {
    if (data.token) {
        localStorage.setItem("fh_token", data.token);
    }
    if (data.user) {
        localStorage.setItem("fh_user", JSON.stringify(data.user));
    }
}

/* =========================
   LOGIN
========================= */
async function handleLogin(e) {
    e.preventDefault();

    const email = document.getElementById("li_email").value.trim();
    const password = document.getElementById("li_pass").value;

    try {
        const r = await fetch(`${API}/api/auth/login`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password })
        });

        const res = await r.json();

        if (!r.ok) {
            alert(res.error || "Login failed");
            return;
        }

        saveAuth(res);
        window.location.href = "dashboard.html";

    } catch (err) {
        console.error(err);
        alert("Network error while logging in");
    }
}

/* =========================
   SIGNUP
========================= */
async function handleSignup(e) {
    e.preventDefault();

    const name = document.getElementById("su_name").value.trim();
    const email = document.getElementById("su_email").value.trim();
    const pass = document.getElementById("su_pass").value;
    const pass2 = document.getElementById("su_pass2").value;

    if (pass !== pass2) {
        alert("Passwords do not match");
        return;
    }

    try {
        const r = await fetch(`${API}/api/auth/signup`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, email, password: pass })
        });

        const res = await r.json();

        if (!r.ok) {
            alert(res.error || "Signup failed");
            return;
        }

        saveAuth(res);
        window.location.href = "dashboard.html";

    } catch (err) {
        console.error(err);
        alert("Network error while signing up");
    }
}

document.getElementById("loginForm").addEventListener("submit", handleLogin);
document.getElementById("signupForm").addEventListener("submit", handleSignup);
</script>

</body>
</html>
